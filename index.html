<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VividAvatarFX ドキュメント</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            max-height: calc(100vh - 20px);
        }
        .sidebar {
            width: 280px;
            background: #f8f9fa;
            padding: 20px;
            overflow-y: auto;
            border-right: 2px solid #e9ecef;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }
        .sidebar h2 {
            color: #667eea;
            font-size: 1.2em;
            margin-bottom: 15px;
            border: none;
            padding: 0;
        }
        .sidebar-nav {
            list-style: none;
            margin: 0;
        }
        .sidebar-nav li {
            margin: 0;
        }
        .sidebar-nav a {
            display: block;
            padding: 8px 12px;
            color: #495057;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s;
            font-size: 0.9em;
        }
        .sidebar-nav a:hover {
            background: #e9ecef;
            color: #667eea;
        }
        .sidebar-nav a.active {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        .sidebar-subnav {
            list-style: none;
            margin: 5px 0 10px 0;
            padding-left: 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .sidebar-subnav.active {
            max-height: 500px;
        }
        .sidebar-subnav a {
            padding: 6px 12px;
            font-size: 0.85em;
            color: #764ba2;
        }
        .sidebar-subnav a:hover {
            background: #f0e7f5;
            color: #764ba2;
        }
        .sidebar-subnav a.active {
            background: #e9d5f5;
            color: #764ba2;
            font-weight: bold;
            border-left: 3px solid #764ba2;
            padding-left: 9px;
        }
        .hamburger {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .hamburger span {
            display: block;
            width: 25px;
            height: 3px;
            background: white;
            margin: 5px 0;
            transition: 0.3s;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .overlay.active {
            display: block;
        }
        .main-content {
            flex: 1;
            overflow-y: auto;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            word-break: break-word;
        }
        header p {
            font-size: 1em;
            opacity: 0.9;
        }
        .content {
            padding: 20px;
        }
        h2 {
            color: #667eea;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            font-size: 1.5em;
        }
        h3 {
            color: #764ba2;
            margin: 25px 0 10px 0;
            font-size: 1.2em;
        }
        h4 {
            color: #667eea;
            margin: 15px 0 10px 0;
            font-size: 1.1em;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .step-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-weight: bold;
            margin-right: 8px;
            font-size: 0.9em;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
            word-break: break-all;
            font-size: 0.9em;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }
        ul, ol {
            margin: 15px 0 15px 20px;
        }
        li {
            margin: 8px 0;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }
        .feature-card h4 {
            margin-top: 0;
            margin-bottom: 8px;
            font-size: 1em;
        }
        .feature-card p {
            font-size: 0.9em;
        }
        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            font-size: 0.9em;
        }
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .toc ul {
            list-style: none;
            margin-left: 0;
        }
        .toc a {
            color: #667eea;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
    @media (max-width: 900px) {
        .hamburger {
            display: block;
        }
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            transform: translateX(-100%);
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }
        .sidebar.active {
            transform: translateX(0);
        }
        .container {
            flex-direction: column;
        }
        .main-content {
            height: auto;
            width: 100%;
        }
        header h1 {
            font-size: 1.5em;
        }
        h2 {
            font-size: 1.3em;
        }
        h3 {
            font-size: 1.1em;
        }
        .content {
            padding: 15px;
            padding-top: 60px;
        }
        .feature-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const sections = document.querySelectorAll('h2[id], h3[id]');
        const navLinks = document.querySelectorAll('.sidebar-nav > li > a');
        const allNavLinks = document.querySelectorAll('.sidebar-nav a');
        const subNavs = document.querySelectorAll('.sidebar-subnav');
        const mainContent = document.querySelector('.main-content');
        const hamburger = document.querySelector('.hamburger');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.querySelector('.overlay');
        
        if (hamburger) {
            hamburger.addEventListener('click', function() {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            });
        }
        
        if (overlay) {
            overlay.addEventListener('click', function() {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            });
        }
        
        allNavLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                if (window.innerWidth <= 900) {
                    sidebar.classList.remove('active');
                    overlay.classList.remove('active');
                }
            });
        });
        
        function setActiveLink() {
            const scrollPosition = mainContent.scrollTop;
            const allSections = Array.from(sections);
            
            let currentSection = '';
            let currentMainSection = '';
            
            for (let i = allSections.length - 1; i >= 0; i--) {
                const section = allSections[i];
                const rect = section.getBoundingClientRect();
                const mainRect = mainContent.getBoundingClientRect();
                const relativeTop = rect.top - mainRect.top + scrollPosition;
                
                if (scrollPosition >= relativeTop - 100) {
                    currentSection = section.getAttribute('id');
                    
                    if (section.tagName === 'H2') {
                        currentMainSection = currentSection;
                        break;
                    } else if (section.tagName === 'H3') {
                        for (let j = i - 1; j >= 0; j--) {
                            if (allSections[j].tagName === 'H2' && allSections[j].id) {
                                currentMainSection = allSections[j].id;
                                break;
                            }
                        }
                        break;
                    }
                }
            }
            
            subNavs.forEach(subnav => {
                subnav.classList.remove('active');
            });
            
            allNavLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            navLinks.forEach(link => {
                const href = link.getAttribute('href').substring(1);
                
                if (href === currentMainSection) {
                    link.classList.add('active');
                    
                    const parentLi = link.parentElement;
                    const subnav = parentLi.querySelector('.sidebar-subnav');
                    if (subnav) {
                        subnav.classList.add('active');
                        
                        const subLinks = subnav.querySelectorAll('a');
                        subLinks.forEach(subLink => {
                            const subHref = subLink.getAttribute('href').substring(1);
                            if (subHref === currentSection) {
                                subLink.classList.add('active');
                            }
                        });
                    }
                }
            });
        }
        
        if (mainContent) {
            mainContent.addEventListener('scroll', setActiveLink);
        }
        
        setActiveLink();
    });
</script>
</head>
<body>
    <button class="hamburger" aria-label="メニューを開く">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <div class="overlay"></div>
<div class="container">
    <aside class="sidebar">
        <h2>目次</h2>
        <ul class="sidebar-nav">
            <li>
                <a href="#quickstart">クイックスタート</a>
            </li>
            <li>
                <a href="#overview">概要</a>
                <ul class="sidebar-subnav">
                    <li><a href="#overview-features">主な機能</a></li>
                </ul>
            </li>
            <li>
                <a href="#setup">セットアップ詳細</a>
                <ul class="sidebar-subnav">
                    <li><a href="#setup-bake">ベイク処理について</a></li>
                    <li><a href="#setup-reset">リセット機能</a></li>
                </ul>
            </li>
            <li>
                <a href="#adjustment">エフェクトの調整</a>
                <ul class="sidebar-subnav">
                    <li><a href="#adjustment-basic">基本設定</a></li>
                    <li><a href="#adjustment-color">カラーグレーディング</a></li>
                    <li><a href="#adjustment-effects">エフェクト設定</a></li>
                </ul>
            </li>
            <li>
                <a href="#preset">プリセット機能</a>
                <ul class="sidebar-subnav">
                    <li><a href="#preset-register">プリセット登録</a></li>
                    <li><a href="#preset-use">プリセットの使用</a></li>
                    <li><a href="#preset-share">共有機能</a></li>
                </ul>
            </li>
            <li>
                <a href="#faq">よくある質問</a>
            </li>
            <li>
                <a href="#license">ライセンス</a>
            </li>
        </ul>
    </aside>
    
    <div class="main-content">
    <header>
        <h1>VividAvatarFX</h1>
        <p>VRChat想定アバターギミック #VAFX</p>
    </header>

    <div class="content">
        <h3>ドキュメント最終更新 : 2025/10/11</h3>
        <h3>最新バージョン : Ver.0.17.1</h3>
        
        <h2 id="quickstart">クイックスタート</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>Prefabを配置</strong>
            <p><code>Assets/x2much4u/VividAvatarFX/Prefab/VividAvatarFX</code> をアバターの直下に配置します。</p>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Setup Toolを開く</strong>
            <p>以下のいずれかの方法でSetup Toolを起動：</p>
            <ul>
                <li>Prefab内の<code>Effect</code>オブジェクトを選択 → Inspector上部の緑色ボタン「セットアップ & ベイク」をクリック</li>
                <li>Unityメニュー → <code>Tools → x2much4u → VividAvatarFX → VAFX Setup Tool</code></li>
            </ul>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>アバターを設定</strong>
            <p>Setup Toolの「ターゲットアバター」欄に、アバターのルートオブジェクトをドラッグ&ドロップします。</p>
        </div>

        <div class="step">
            <span class="step-number">4</span>
            <strong>ベイクを実行</strong>
            <p>緑色のボタン「マテリアル値を焼き込み & アバターに統合 (Bake & Merge)」をクリックします。</p>
        </div>

        <div class="success">
            <strong>✓ セットアップ完了</strong>
            <p>これでVividAvatarFXの基本的な導入は完了です。VRChatにアップロードして動作を確認してください。</p>
        </div>

        <div class="warning">
            <strong>重要：マテリアル値を変更したら必ず再ベイク</strong>
            <p>VAFXマテリアルのパラメーターを変更した場合、必ず再度ベイクを実行してください。ベイクしないとVRChat内で変更が反映されません。</p>
        </div>

        <h2 id="overview">概要</h2>
        <p>VividAvatarFXは、VRChatアバター向けの視界エフェクトシステムです。カラーグレーディング、グリッチ、レンズ歪みなど、映画やゲームで使われるような高度なポストプロセスエフェクトをVRChat内でリアルタイムに制御できます。</p>

        <h3 id="overview-features">主な機能</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <h4>カラーグレーディング</h4>
                <p>明度・彩度・コントラスト・色相シフト・ガンマ調整</p>
            </div>
            <div class="feature-card">
                <h4>トーンカーブ</h4>
                <p>RGB各チャンネルの詳細調整</p>
            </div>
            <div class="feature-card">
                <h4>Lift/Gamma/Gain</h4>
                <p>シャドウ・ミッドトーン・ハイライトの個別調整</p>
            </div>
            <div class="feature-card">
                <h4>ビネット</h4>
                <p>画面端の暗化・カスタムカラー対応</p>
            </div>
            <div class="feature-card">
                <h4>シネマティックライン</h4>
                <p>映画のような画面端の黒帯</p>
            </div>
            <div class="feature-card">
                <h4>グリッチエフェクト</h4>
                <p>ラインシフト（横/縦）・カラー分離・ブロックノイズ</p>
            </div>
            <div class="feature-card">
                <h4>ブルーム</h4>
                <p>明るい部分の発光効果</p>
            </div>
            <div class="feature-card">
                <h4>色収差</h4>
                <p>8種類のプリセットパターン</p>
            </div>
            <div class="feature-card">
                <h4>レンズ歪み</h4>
                <p>バレル・ピンクッション歪み、拡縮</p>
            </div>
            <div class="feature-card">
                <h4>その他エフェクト</h4>
                <p>ノイズ/グレイン・ポスタライズ・ディザリング・モザイク・ネオンエッジ・色反転</p>
            </div>
        </div>

        <h2 id="setup">セットアップ詳細</h2>

        <h3 id="setup-bake">ベイク処理について</h3>
        <p>VividAvatarFXは、Modular Avatar Parametersを使用していません。そのため、マテリアルの設定値を直接アバターのExpressionParametersに書き込む「ベイク処理」が必要です。</p>

        <div class="info">
            <strong>ベイク処理で行われること</strong>
            <ul>
                <li>マテリアルの全プロパティ値（0-1の範囲）をExpressionParametersのDefault値に設定</li>
                <li>VAFX_ResetAllアニメーションクリップに初期値を記録</li>
                <li>VRCAvatarParameterDriverに初期値を設定</li>
                <li>アバターのExpressionParametersにVAFXパラメーターをマージ</li>
            </ul>
        </div>

        <h3 id="setup-reset">リセット機能</h3>
        <p>VRChat内で「VAFX_ResetAll」パラメーターをONにすると、ベイク時に設定した初期値にすべてのエフェクトをリセットできます。この機能により、複雑な設定を簡単に元に戻すことができます。</p>

        <h2 id="adjustment">エフェクトの調整</h2>
        <p>マテリアル<code>Assets/x2much4u/VividAvatarFX/Material/VividAvatarFX.mat</code>を選択すると、カスタムInspectorが表示されます。</p>

        <div class="info">
            <strong>言語設定</strong>
            <p>Inspector上部の「Language」から日本語/英語を切り替えられます。この設定はUnityのEditorPrefsに保存され、すべてのVAFXツールで共有されます。</p>
        </div>

        <h3 id="adjustment-basic">基本設定</h3>
        
        <h4>メインカラー</h4>
        <ul>
            <li><strong>色相 (Hue):</strong> エフェクト全体の色相（0-1）</li>
            <li><strong>彩度 (Saturation):</strong> 色の鮮やかさ（0-1）</li>
            <li><strong>明度 (Value):</strong> 明るさ（0-1）</li>
            <li><strong>透明度 (Alpha):</strong> 不透明度（0-1）</li>
            <li><strong>全体の透明度 (Opacity):</strong> エフェクト全体の不透明度</li>
        </ul>

        <h4>表示設定</h4>
        <ul>
            <li><strong>Enable VR:</strong> VR視点で表示するかどうか</li>
            <li><strong>Enable Desktop:</strong> デスクトップ視点で表示するかどうか</li>
            <li><strong>Enable SS:</strong> VRChatカメラ（スクリーンショット/動画撮影）で表示するかどうか</li>
            <li><strong>Enable Other:</strong> その他の環境（Unity Editorなど）で表示するかどうか</li>
        </ul>

        <div class="info">
            <strong>表示判定の仕組み</strong>
            <p>VividAvatarFXは、VRChatのグローバル変数（<code>_VRChatCameraMode</code>、<code>_VRChatMirrorMode</code>など）を使用して、現在の視点を判定しています。ミラー内やパノラマモードでは自動的に非表示になります。</p>
        </div>

        <h4>設定</h4>
        <ul>
            <li><strong>レンダーキュー (Render Queue):</strong> 描画順序（デフォルト: 4100）。他のエフェクトとの描画順を調整する場合に変更します。</li>
        </ul>

        <h3 id="adjustment-color">カラーグレーディング</h3>

        <h4>基本調整</h4>
        <ul>
            <li><strong>明るさ (Brightness):</strong> 画像全体の明るさ（0-1、0.5が中間）</li>
            <li><strong>コントラスト (Contrast):</strong> 明暗の差（0-1、0.5が中間）</li>
            <li><strong>彩度 (Saturation):</strong> 色の鮮やかさ（0-1、0.5が中間）</li>
            <li><strong>色相シフト (Hue Shift):</strong> 色相環の回転（0-1、0.5が中間）</li>
            <li><strong>ガンマ (Gamma):</strong> 中間調の明るさ（0-1、0.33がデフォルト）</li>
            <li><strong>色反転 (Color Invert):</strong> 色を反転するかどうか（Bool）</li>
        </ul>

        <p>各調整には「〜Enabled」トグルがあり、個別にON/OFFできます。</p>

        <h4>トーンカーブ</h4>
        <p>RGB各チャンネルごとに、スケールとパワーを調整できます：</p>
        <ul>
            <li><strong>赤/緑/青トーンカーブ スケール:</strong> 各色チャンネルの倍率</li>
            <li><strong>赤/緑/青トーンカーブ パワー:</strong> 各色チャンネルの非線形変換</li>
            <li><strong>トーンカーブ強度 (Intensity):</strong> 効果の適用度（0-1）</li>
        </ul>

        <h4>Lift/Gamma/Gain</h4>
        <p>映画の色補正で使われる手法で、明度レンジごとに色調整ができます：</p>
        <ul>
            <li><strong>Lift (リフト):</strong> シャドウ（暗部）の色調整（HSV）</li>
            <li><strong>Gamma (ガンマ調整):</strong> ミッドトーン（中間調）の色調整（HSV）</li>
            <li><strong>Gain (ゲイン):</strong> ハイライト（明部）の色調整（HSV）</li>
        </ul>

        <h3 id="adjustment-effects">エフェクト設定</h3>

        <h4>ビネット</h4>
        <ul>
            <li><strong>強度 (Vignette):</strong> 効果の強さ（0-1）</li>
            <li><strong>滑らかさ (Smoothness):</strong> エッジのぼかし具合（0-1）</li>
            <li><strong>透明度 (Alpha):</strong> ビネット効果の不透明度（0-1）</li>
            <li><strong>色 (Color):</strong> ビネットの色（HSV）</li>
        </ul>

        <h4>シネマティックライン</h4>
        <ul>
            <li><strong>全体の強度 (Intensity):</strong> 効果全体の強さ（0-1）</li>
            <li><strong>横線強度 (Horizontal):</strong> 画面上下の黒帯（0-1）</li>
            <li><strong>縦線強度 (Vertical):</strong> 画面左右の黒帯（0-1）</li>
            <li><strong>色 (Color):</strong> ラインの色（HSV）</li>
            <li><strong>透明度 (Alpha):</strong> ラインの不透明度（0-1）</li>
        </ul>

        <h4>ネオンエッジ</h4>
        <ul>
            <li><strong>強度 (Neon Edge):</strong> エッジ検出による発光効果の強さ（0-1）</li>
        </ul>

        <h4>ノイズ/グレイン</h4>
        <ul>
            <li><strong>種類 (Type):</strong> 0でブロックノイズ、1でフィルムグレイン（0-1）</li>
            <li><strong>強度 (Intensity):</strong> ノイズの強さ（0-1）</li>
            <li><strong>サイズ (Size):</strong> ノイズ粒子のサイズ（0-1）</li>
        </ul>

        <h4>モザイク</h4>
        <ul>
            <li><strong>ブロックサイズ (Mosaic Block Size):</strong> ピクセレーション効果の強さ（0-1）</li>
        </ul>

        <h4>ポスタライズ</h4>
        <ul>
            <li><strong>レベル (Posterize Levels):</strong> 色階調の段階数（0-1、値が小さいほど階調が少なくなる）</li>
        </ul>

        <h4>ディザリング</h4>
        <ul>
            <li><strong>強度 (Dither Strength):</strong> ディザーパターンの強さ（0-1）</li>
        </ul>

        <h4>ブルーム</h4>
        <ul>
            <li><strong>強度 (Intensity):</strong> 発光効果の強さ（0-1）</li>
            <li><strong>閾値 (Threshold):</strong> 発光が始まる明るさの基準（0-1）</li>
            <li><strong>半径 (Radius):</strong> 発光の広がり（0-1）</li>
        </ul>

        <h4>色収差</h4>
        <ul>
            <li><strong>強度 (Chromatic Aberration):</strong> 色ずれの強さ（0-1）</li>
            <li><strong>色変更 (Preset):</strong> 8種類の色収差パターン（0-1で8段階、0/8, 1/8, 2/8...7/8）
                <ul>
                    <li>0: R+, G中, B- （標準的な色収差）</li>
                    <li>1: R-, G+, B中</li>
                    <li>2: R-, G+, B+</li>
                    <li>3: R+, G+, B-</li>
                    <li>4: R+, G-, B-</li>
                    <li>5: R-, G+, B-</li>
                    <li>6: R-, G-, B+</li>
                    <li>7: R+, G-, B+</li>
                </ul>
            </li>
        </ul>

        <h4>レンズ歪み</h4>
        <ul>
            <li><strong>強度 (Intensity):</strong> 歪みの強さ（0-1）</li>
            <li><strong>スケール (Scale):</strong> レンズのズーム倍率（0-1）</li>
            <li><strong>歪み形状 (Power):</strong> 歪みの形状カーブ（0-1）</li>
            <li><strong>バレル係数 (Barrel):</strong> バレル/ピンクッション歪みの度合い（0-1）</li>
            <li><strong>横引き延ばし (Horizontal Stretch):</strong> 横方向の拡大（0-1）</li>
            <li><strong>横に潰す (Horizontal Squash):</strong> 横方向の縮小（0-1）</li>
            <li><strong>縦引き延ばし (Vertical Stretch):</strong> 縦方向の拡大（0-1）</li>
            <li><strong>縦に潰す (Vertical Squash):</strong> 縦方向の縮小（0-1）</li>
        </ul>

        <h4>グリッチエフェクト</h4>
        <ul>
            <li><strong>全体の強度 (Overall Intensity):</strong> グリッチ効果全体の強さ（0-1）</li>
        </ul>
        <p><strong>横方向ラインシフト：</strong></p>
        <ul>
            <li><strong>強度 (Intensity):</strong> ずれの強さ（0-1）</li>
            <li><strong>頻度 (Frequency):</strong> 発生頻度（0-1）</li>
            <li><strong>ブレンド (Blend):</strong> 元画像との混合率（0-1）</li>
        </ul>
        <p><strong>縦方向ラインシフト：</strong></p>
        <ul>
            <li><strong>強度 (Intensity):</strong> ずれの強さ（0-1）</li>
            <li><strong>頻度 (Frequency):</strong> 発生頻度（0-1）</li>
            <li><strong>ブレンド (Blend):</strong> 元画像との混合率（0-1）</li>
        </ul>
        <p><strong>カラー分離：</strong></p>
        <ul>
            <li><strong>強度 (Intensity):</strong> 色分離の強さ（0-1）</li>
            <li><strong>ブレンド (Blend):</strong> 元画像との混合率（0-1）</li>
        </ul>
        <p><strong>ブロックノイズ：</strong></p>
        <ul>
            <li><strong>サイズ (Size):</strong> ブロックの大きさ（0-1）</li>
            <li><strong>頻度 (Frequency):</strong> 発生頻度（0-1）</li>
            <li><strong>強度 (Intensity):</strong> ノイズの強さ（0-1）</li>
            <li><strong>ブレンド (Blend):</strong> 元画像との混合率（0-1）</li>
        </ul>

        <h2 id="preset">プリセット機能</h2>

        <h3 id="preset-register">プリセット登録</h3>
        <p>現在のマテリアル設定をプリセットとして登録し、VRChat内のメニューから呼び出せるようにします。</p>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Preset Makerを開く</strong>
            <p>以下のいずれかの方法で起動：</p>
            <ul>
                <li>マテリアルInspectorの「プリセット登録」ボタンをクリック</li>
                <li>Unityメニュー → <code>Tools → x2much4u → VividAvatarFX → VAFX Preset Maker</code></li>
            </ul>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>保存スロットを選択</strong>
            <p>Preset01〜Preset22の中から保存先を選択します。</p>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>メニュー表示名を入力</strong>
            <p>VRChat内のExPression Menuに表示される名前を入力します。日本語も使用可能です。</p>
        </div>

        <div class="step">
            <span class="step-number">4</span>
            <strong>表示設定を選択</strong>
            <p>このプリセットでの表示設定を選択します：</p>
            <ul>
                <li><strong>Enable VR:</strong> VR視点で表示するか</li>
                <li><strong>Enable Desktop:</strong> デスクトップ視点で表示するか</li>
                <li><strong>Enable SS:</strong> カメラ撮影時に表示するか</li>
                <li><strong>Enable Other:</strong> その他の環境で表示するか</li>
            </ul>
            <p>これらの設定は、マテリアルの値よりも優先されます。</p>
        </div>

        <div class="step">
            <span class="step-number">5</span>
            <strong>ベイクを実行</strong>
            <p>緑色のボタン「プリセット [名前] を [スロット] にベイク」をクリックします。</p>
        </div>

        <div class="info">
            <strong>既存プリセットの上書き</strong>
            <p>既に同名のJSONファイルが存在する場合、上書き確認ダイアログが表示されます。選択肢は3つ：</p>
            <ul>
                <li><strong>上書きする:</strong> JSONファイルを更新し、ベイクも実行</li>
                <li><strong>上書きしない（焼き込みのみ実行）:</strong> JSONファイルは更新せず、AnimatorControllerへのベイクのみ実行</li>
                <li><strong>キャンセル:</strong> 何もしない</li>
            </ul>
        </div>

        <div class="info">
            <strong>プリセット表示名プレビュー</strong>
            <p>Preset Makerの下部には、現在登録されているプリセットの一覧が表示されます。色分けは以下の通り：</p>
            <ul>
                <li><strong>青色:</strong> 選択中のプリセット</li>
                <li><strong>緑色:</strong> JSONファイルが存在するプリセット</li>
                <li><strong>灰色:</strong> 未登録のプリセット</li>
            </ul>
        </div>

        <h3 id="preset-use">プリセットの使用</h3>

        <h4>Unity内での適用</h4>
        <p>マテリアルInspectorの「プリセット」ドロップダウンから保存済みプリセットを選択し、「適用」ボタンをクリックすると、マテリアルにプリセットの値が反映されます。</p>

        <div class="warning">
            <strong>適用後は必ずベイク</strong>
            <p>プリセットを適用しただけではVRChat内で変更されません。適用後、Setup ToolまたはPreset Makerで再度ベイクを実行してください。</p>
        </div>

        <h4>VRChat内での切り替え</h4>
        <p>VRChat内では、Expression Menuから登録したプリセットを選択することで、瞬時にエフェクトを切り替えられます。プリセットメニューは3ページに分かれています。</p>

        <h3 id="preset-share">共有機能</h3>

        <h4>エクスポート</h4>
        <p>マテリアルInspectorの「エクスポート」ボタンで、現在の設定をJSONファイルとして保存できます。保存先を指定するダイアログが表示されます。</p>

        <div class="warning">
            <strong>Presetフォルダ外への保存</strong>
            <p><code>Assets/x2much4u/VividAvatarFX/Preset/</code>以外に保存すると、プリセットメニューで認識されません。共有用にエクスポートする場合はこの動作で問題ありませんが、自分で使用する場合はPresetフォルダ内に保存してください。</p>
        </div>

        <h4>インポート</h4>
        <p>マテリアルInspectorの「インポート」ボタンで、外部のJSONファイルを読み込めます。インポート時には以下の処理が行われます：</p>
        <ol>
            <li>JSONファイルの内容をマテリアルに適用</li>
            <li>JSONファイルを<code>Preset/</code>フォルダにコピー</li>
            <li>プリセットメニューに追加</li>
        </ol>

        <div class="info">
            <strong>エクスポート と プリセット登録 の違いは何？</strong>
            <ul>
                <li><strong>エクスポート:</strong> 設定をJSONファイルとして保存するだけ（他の人と共有する場合に使用）</li>
                <li><strong>プリセット登録:</strong> AnimatorControllerに設定を書き込み、VRChat内のメニューから切り替え可能にする</li>
            </ul>
        </div>

        <h2 id="faq">よくある質問</h2>

        <h3>Q: エフェクトが表示されない</h3>
        <p><strong>A:</strong> 以下を確認してください：</p>
        <ul>
            <li>Setup Toolでベイクを実行したか</li>
            <li>表示設定（EnableVR/EnableDesktopなど）が有効になっているか</li>
            <li>マテリアルが正しく<code>x2much4u/VividAvatarFX</code>シェーダーを使用しているか</li>
            <li>影響範囲の設定が適切か（後述）</li>
        </ul>

        <h3>Q: 影響範囲とは？</h3>
        <p><strong>A:</strong> VividAvatarFXは、Cubeオブジェクトが視界に入っている範囲でのみエフェクトが適用されます。これはシェーダーの仕組み上、描画オブジェクトが必要なためです。</p>

        <div class="info">
            <strong>影響範囲の調整方法</strong>
            <p>VRChat内のメニュー → 視点設定 → 影響範囲から、Cubeのスケールを調整できます（デフォルト: 3、最大: 20）。</p>
        </div>

        <div class="warning">
            <strong>影響範囲を大きくしすぎない</strong>
            <p>スケールを大きくしすぎると、フォールバック時（シェーダーが動作しない環境）に巨大な不透過Cubeが出現し、視界を完全に遮ってしまいます。段階的に調整してください。</p>
        </div>

        <div class="info">
            <strong>影響範囲の可視化</strong>
            <p>VRChat内のメニュー → 視点設定 → 影響範囲可視化をONにすると、半透明の水色キューブとして影響範囲を確認できます。調整後は必ずOFFに戻してください。</p>
        </div>

        <h3>Q: デスクトップで表示されない / 「その他」でしか表示されない</h3>
        <p><strong>A:</strong> 以下の場合に表示判定が失敗することがあります：</p>
        <ul>
            <li>カメラを傾けるギミックを使用している</li>
            <li>他の視界エフェクトと併用している</li>
            <li>特殊なカメラ設定を使用している</li>
        </ul>
        <p><strong>解決方法:</strong> 「Enable Other」をONにする（最も確実）、または競合するギミックを無効化する</p>

        <h3>Q: カメラのみで表示したいのに、デスクトップでも表示される</h3>
        <p><strong>A:</strong> VRChatのウィンドウモードに切り替えてください（Alt+Enter）。フルスクリーンモードでは判定が不正確になる場合があります。</p>

        <h3>Q: パラメーター数が多くて圧迫が心配</h3>
        <p><strong>A:</strong> VividAvatarFXのパラメーターは<code>networkSynced: false</code>に設定されているため、ExpressionParametersの容量を一切消費しません。実質的な使用メモリは0です。</p>

        <h3>Q: プリセットが読み込まれない</h3>
        <p><strong>A:</strong> <code>Assets/x2much4u/VividAvatarFX/Preset/</code>フォルダにJSONファイルが存在するか確認してください。サブフォルダ内のファイルも認識されます。</p>

        <h3>Q: 設定を初期値に戻したい</h3>
        <p><strong>A:</strong> マテリアルInspector右上の<strong>⁝</strong>メニューから<strong>Reset</strong>を選択すると、シェーダーのデフォルト値に戻ります。</p>

        <h3>Q: VRChat内で設定をリセットしたい</h3>
        <p><strong>A:</strong> Expression Menuから「ベイクした値にリセット」ボタンを押すと、最後にベイクした値にすべてのパラメーターがリセットされます。</p>

        <h2 id="license">ライセンス</h2>

        <h3>VividAvatarFX本体</h3>
        <p>VividAvatarFX本体は<strong>VN3 License</strong>のもとで配布されています。</p>

        <div class="info">
            <strong>主要な利用条件</strong>
            <ul>
                <li><strong>個人利用:</strong> 自由に使用可能</li>
                <li><strong>商用利用:</strong> 可能</li>
                <li><strong>改変:</strong> 可能</li>
                <li><strong>再配布:</strong> 禁止</li>
                <li><strong>JSONファイルの配布:</strong> 許可（プリセット設定の共有）</li>
            </ul>
            <p>詳細な利用規約は、製品に同梱されているVN3ライセンス全文を必ずご確認ください。</p>
            <p><a href="https://drive.google.com/drive/folders/1iJT_2lE_kOlim-YSXlYpvrK9QJp19qWB" target="_blank" style="color: #667eea; text-decoration: none; font-weight: bold;">→ VN3ライセンス全文</a></p>
        </div>

        <div class="code-block">
VividAvatarFX<br>
Copyright (c) 2025 ゴンリー (x2much4u)<br>
VN3 License
        </div>

        <footer>
            <p>&copy; 2025 ゴンリー (x2much4u) - VividAvatarFX</p>
            <p>VRChat想定アバターギミック #VAFX</p>
            <p><a href="https://x2much4u.booth.pm/" target="_blank" style="color: #667eea; text-decoration: none;">https://x2much4u.booth.pm/</a></p>
        </footer>
    </div>
    </div>
</div>
</body>
</html>
