<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VividAvatarFX ドキュメント</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        .content {
            padding: 40px 30px;
        }
        h2 {
            color: #667eea;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            font-size: 1.8em;
        }
        h3 {
            color: #764ba2;
            margin: 25px 0 10px 0;
            font-size: 1.4em;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .step-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
        ul, ol {
            margin: 15px 0 15px 30px;
        }
        li {
            margin: 8px 0;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .feature-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }
        .button {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            transition: background 0.3s;
        }
        .button:hover {
            background: #5568d3;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🎨 VividAvatarFX</h1>
            <p>VRChatアバター用ビューエフェクトシステム</p>
        </header>

        <div class="content">
            <h2>📋 概要</h2>
            <p>VividAvatarFXは、VRChatアバターの視界に様々な視覚エフェクトを追加できるシステムです。カラーグレーディング、グリッチエフェクト、レンズ歪み、ビネット、ブルームなど、多彩なエフェクトをリアルタイムで制御できます。</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>🎨 カラーグレーディング</h4>
                    <p>明度・彩度・コントラスト・色相シフト・ガンマ調整</p>
                </div>
                <div class="feature-card">
                    <h4>⚡ グリッチエフェクト</h4>
                    <p>ラインシフト・カラー分離・ブロックノイズ</p>
                </div>
                <div class="feature-card">
                    <h4>🔍 レンズエフェクト</h4>
                    <p>レンズ歪み・色収差・ビネット</p>
                </div>
                <div class="feature-card">
                    <h4>✨ ポストプロセス</h4>
                    <p>ブルーム・ノイズ・ディザリング・ポスタライズ</p>
                </div>
            </div>

            <h2>🚀 セットアップ手順</h2>

            <div class="step">
                <span class="step-number">1</span>
                <strong>Prefabの配置</strong>
                <p><code>Assets/x2much4u/VividAvatarFX/Prefab/VividAvatarFX</code> をアバターの直下（ルート）に配置します。</p>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>Effectオブジェクトの選択</strong>
                <p>Prefab内の <code>VividAvatarFX/Effect</code> を選択し、Inspectorを表示します。</p>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>Setup Toolの起動</strong>
                <p>以下のいずれかの方法でSetup Toolを開きます：</p>
                <ul>
                    <li>Inspector上部の<strong>「設定変更後は必ずベイクしてください。」</strong>ボタンをクリック</li>
                    <li>メニューバーから <code>Tools → x2much4u → VividAvatarFX → VAFX Setup Tool</code></li>
                </ul>
            </div>

            <div class="step">
                <span class="step-number">4</span>
                <strong>アバターの設定</strong>
                <p>Setup Tool内の「ターゲットアバター」欄に、VRCAvatarDescriptorが付いているアバターのGameObjectをドラッグ&ドロップします。</p>
            </div>

            <div class="step">
                <span class="step-number">5</span>
                <strong>ベイク実行</strong>
                <p>緑色の<strong>「マテリアル値を焼き込み & アバターに統合 (Bake & Merge)」</strong>ボタンをクリックします。</p>
            </div>

            <div class="success">
                <strong>✅ セットアップ完了！</strong>
                <p>これでVividAvatarFXがアバターに統合され、VRChat内でエフェクトを使用できます。</p>
            </div>

            <h2>⚙️ エフェクトの調整方法</h2>

            <h3>マテリアルエディタから調整</h3>
            <p><code>Assets/x2much4u/VividAvatarFX/Material/VividAvatarFX.mat</code> を選択すると、Inspectorにカスタムエディタが表示されます。</p>
            
            <div class="info">
                <strong>📌 重要：</strong> マテリアルの値を変更したら、<strong>必ず再度ベイク</strong>してください。ベイクしないとVRChat内で変更が反映されません。
            </div>

            <h3>主要なパラメータ</h3>
            
            <h4>基本設定</h4>
            <ul>
                <li><strong>メインカラー (HSV+Alpha):</strong> エフェクト全体の基本色</li>
                <li><strong>全体の透明度:</strong> エフェクトの不透明度</li>
                <li><strong>表示設定:</strong> VR/デスクトップ/カメラでの表示切り替え</li>
            </ul>

            <h4>カラーグレーディング</h4>
            <ul>
                <li><strong>明るさ/コントラスト/彩度:</strong> 基本的な色調整</li>
                <li><strong>色相シフト:</strong> 色の回転</li>
                <li><strong>ガンマ:</strong> 中間調の調整</li>
                <li><strong>トーンカーブ:</strong> RGB各チャンネルの詳細調整</li>
                <li><strong>Lift/Gamma/Gain:</strong> 映画的な色補正（シャドウ/ミッドトーン/ハイライト）</li>
            </ul>

            <h4>エフェクト</h4>
            <ul>
                <li><strong>ビネット:</strong> 画面端の暗化効果</li>
                <li><strong>シネマティックライン:</strong> 映画的な黒帯</li>
                <li><strong>ネオンエッジ:</strong> エッジ検出による発光</li>
                <li><strong>ノイズ/グレイン:</strong> フィルムグレイン効果</li>
                <li><strong>ブルーム:</strong> 明るい部分の発光</li>
                <li><strong>色収差:</strong> レンズの色ずれ</li>
                <li><strong>レンズ歪み:</strong> 魚眼効果・バレル/ピンクッション歪み</li>
                <li><strong>グリッチ:</strong> デジタルノイズ効果</li>
            </ul>

            <h2>📦 プリセット機能</h2>

            <h3>プリセットの登録</h3>
            <p>現在のマテリアル設定をプリセットとして保存できます。</p>

            <div class="step">
                <span class="step-number">1</span>
                <strong>Preset Makerを開く</strong>
                <ul>
                    <li>マテリアルInspectorの<strong>「プリセット登録はこちら」</strong>ボタン</li>
                    <li>メニューバー <code>Tools → x2much4u → VividAvatarFX → VAFX Preset Maker</code></li>
                </ul>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>プリセットスロット選択</strong>
                <p>Preset01〜Preset08のいずれかを選択します。</p>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>表示名の入力</strong>
                <p>VRChatメニューに表示される名前を入力します（例：「サイバーパンク」「レトロフィルム」など）。</p>
            </div>

            <div class="step">
                <span class="step-number">4</span>
                <strong>ベイク実行</strong>
                <p>緑色の<strong>「プリセット [名前] をベイク (Bake Preset)」</strong>ボタンをクリックします。</p>
            </div>

            <div class="info">
                <strong>📁 プリセットの保存場所</strong>
                <p>プリセットは <code>Assets/x2much4u/VividAvatarFX/Preset/</code> にJSON形式で保存されます。このフォルダ内にサブフォルダを作成しても認識されるため、整理が可能です。</p>
            </div>

            <h3>プリセットの読み込み</h3>
            <p>マテリアルInspectorの「プリセット」ドロップダウンから保存済みプリセットを選択し、<strong>「適用」</strong>ボタンをクリックすると、マテリアルに設定が反映されます。</p>

            <div class="warning">
                <strong>⚠️ 注意：</strong> プリセットを適用しただけではVRChat内では変更されません。適用後、必ず<strong>Setup Toolでベイク</strong>を実行してください。
            </div>

            <h3>エクスポート機能</h3>
            <p>マテリアルInspectorの<strong>「エクスポート」</strong>ボタンで、現在の設定をJSON形式で保存できます。</p>
            
            <div class="info">
                <strong>プリセット登録との違い</strong>
                <ul>
                    <li><strong>プリセット登録:</strong> AnimatorControllerに設定を書き込み、VRChatメニューから切り替え可能にする</li>
                    <li><strong>エクスポート:</strong> 設定をJSONファイルとして出力するだけ（共有用）</li>
                </ul>
                <p>他の人に設定を共有したい場合は、エクスポートが簡単です。</p>
            </div>

            <h2>🔧 技術仕様</h2>

            <h3>パラメータの正規化</h3>
            <p>VRChatのRadial Puppetで使用するため、全てのパラメータは<strong>0〜1の範囲に正規化</strong>されます。</p>
            
            <div class="code-block">
// 例：ToneCurveRedScale (0-10) → 正規化 (0-1)
正規化値 = 元の値 / 10.0

// 例：LensDistortionBarrel (-1 to 1) → 正規化 (0-1)
正規化値 = (元の値 + 1.0) / 2.0
            </div>

            <h3>カメラ判定</h3>
            <p>シェーダー内で以下の判定を行い、適切な場面でエフェクトを表示します：</p>
            <ul>
                <li><strong>VRView:</strong> ステレオレンダリング検出</li>
                <li><strong>PlayerView:</strong> FOV 60°のデスクトップビュー</li>
                <li><strong>Screenshot:</strong> 1280x720, 1920x1080, 3840x2160 解像度</li>
                <li><strong>Mirror:</strong> プロジェクション行列のオフセットで検出（除外）</li>
            </ul>

            <h3>対応シェーダープロパティ数</h3>
            <p>合計<strong>80以上</strong>のシェーダープロパティを制御可能です。</p>

            <h2>❓ よくある質問</h2>

            <h3>Q: エフェクトが表示されない</h3>
            <p><strong>A:</strong> 以下を確認してください：</p>
            <ul>
                <li>Setup Toolでベイクを実行したか</li>
                <li>表示設定（EnableVR/EnableDesktop等）が有効になっているか</li>
                <li>Quality SettingsでAnti-Aliasingが有効か（無効だと正常に動作しません）</li>
                <li>マテリアルが正しくシェーダー <code>x2much4u/VividAvatarFX</code> を使用しているか</li>
            </ul>

            <h3>Q: パラメータが256を超えてしまう</h3>
            <p><strong>A:</strong> VividAvatarFXは多数のパラメータを使用します。必要に応じて：</p>
            <ul>
                <li>使用しないエフェクトのパラメータを削除</li>
                <li>プリセット機能を活用して切り替え式にする</li>
                <li>他のギミックとのパラメータ共有を検討</li>
            </ul>

            <h3>Q: プリセットが読み込まれない</h3>
            <p><strong>A:</strong> <code>Assets/x2much4u/VividAvatarFX/Preset/</code> フォルダにJSONファイルが存在するか確認してください。サブフォルダ内でも認識されます。</p>

            <h3>Q: 設定を元に戻したい</h3>
            <p><strong>A:</strong> Setup Toolの<strong>「VAFXパラメーターを削除 (Remove Parameters)」</strong>ボタンで全パラメータを削除できます。</p>

            <h2>📄 ライセンス情報</h2>
            <p>このシステムの一部（Camera Analyzer Logic、Vertex Shader structure）は、AoiKamishiro氏が作成したコードを改変したものです。</p>
            <div class="code-block">
Copyright (c) 2020 AoiKamishiro
MIT License
            </div>

            <h2>🎯 推奨設定例</h2>

            <h3>サイバーパンク風</h3>
            <ul>
                <li>MainColor: 青紫系 (Hue: 0.6-0.7)</li>
                <li>ChromaticAberration: 0.3-0.5</li>
                <li>Glitch LineShift: 0.3</li>
                <li>Bloom: 0.6</li>
                <li>Vignette: 0.4 (濃い青)</li>
            </ul>

            <h3>レトロフィルム風</h3>
            <ul>
                <li>Saturation: 0.3-0.4 (低彩度)</li>
                <li>Noise/Grain: 0.05-0.1</li>
                <li>Vignette: 0.5 (黒)</li>
                <li>Contrast: 0.6</li>
                <li>CinematicLines: 0.3 (上下)</li>
            </ul>

            <h3>ドリームコア/幻想的</h3>
            <ul>
                <li>Bloom: 0.7-0.9</li>
                <li>Saturation: 0.7</li>
                <li>HueShift: アニメーション</li>
                <li>LensDistortion: 0.2-0.3</li>
                <li>MainColor Alpha: 0.7-0.8</li>
            </ul>

        </div>

        <footer>
            <p>&copy; 2024 x2much4u - VividAvatarFX</p>
            <p>VRChat Avatar Effect System</p>
        </footer>
    </div>
</body>
</html>
